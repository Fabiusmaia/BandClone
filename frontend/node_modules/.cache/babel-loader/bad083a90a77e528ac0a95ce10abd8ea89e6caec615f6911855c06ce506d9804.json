{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\toranvor\\\\Desktop\\\\bandclone-app\\\\frontend\\\\src\\\\Context\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nfunction AuthProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const apiURL = process.env.REACT_APP_API_URL;\n  const userId = localStorage.getItem(\"user_id\");\n  const [authenticated, setAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const token = localStorage.getItem(\"token\");\n  const expirationDate = localStorage.getItem(\"expiration-date\");\n  useEffect(() => {\n    if (token && expirationDate > Date.now() / 1000) {\n      setAuthenticated(true);\n      console.log(expirationDate, Date.now() / 1000);\n    } else {\n      console.log(expirationDate, Date.now() / 1000);\n      handleLogout();\n    }\n    setLoading(false);\n  }, [authenticated]);\n  function handleLogin() {\n    setAuthenticated(true);\n  }\n  function handleLogout() {\n    localStorage.clear();\n    setAuthenticated(false);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Context.Provider, {\n      value: {\n        authenticated,\n        handleLogin,\n        handleLogout,\n        userId,\n        apiURL\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(AuthProvider, \"C5fmhGagnTvnGVozB+sETPsPGbM=\");\n_c = AuthProvider;\nexport { Context, AuthProvider };\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","axios","Context","AuthProvider","children","apiURL","process","env","REACT_APP_API_URL","userId","localStorage","getItem","authenticated","setAuthenticated","loading","setLoading","token","expirationDate","Date","now","console","log","handleLogout","handleLogin","clear"],"sources":["C:/Users/toranvor/Desktop/bandclone-app/frontend/src/Context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Context = createContext();\r\n\r\nfunction AuthProvider({ children }) {\r\n  const apiURL = process.env.REACT_APP_API_URL;\r\n  const userId = localStorage.getItem(\"user_id\");\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const token = localStorage.getItem(\"token\");\r\n  const expirationDate = localStorage.getItem(\"expiration-date\");\r\n  useEffect(() => {\r\n    if (token && expirationDate > Date.now() / 1000) {\r\n      setAuthenticated(true);\r\n      console.log(expirationDate, Date.now() / 1000);\r\n    } else {\r\n      console.log(expirationDate, Date.now() / 1000);\r\n      handleLogout();\r\n    }\r\n    setLoading(false);\r\n  }, [authenticated]);\r\n\r\n  function handleLogin() {\r\n    setAuthenticated(true);\r\n  }\r\n\r\n  function handleLogout() {\r\n    localStorage.clear();\r\n    setAuthenticated(false);\r\n  }\r\n  if (loading) {\r\n    return <h1>Loading...</h1>;\r\n  } else {\r\n    return (\r\n      <Context.Provider\r\n        value={{ authenticated, handleLogin, handleLogout, userId, apiURL }}\r\n      >\r\n        {children}\r\n      </Context.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport { Context, AuthProvider };\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AAAC;AAE1B,MAAMC,OAAO,gBAAGJ,aAAa,EAAE;AAE/B,SAASK,YAAY,OAAe;EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC;EAChC,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;EAC5C,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;EAC9C,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAMiB,KAAK,GAAGN,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMM,cAAc,GAAGP,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;EAC9DX,SAAS,CAAC,MAAM;IACd,IAAIgB,KAAK,IAAIC,cAAc,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,EAAE;MAC/CN,gBAAgB,CAAC,IAAI,CAAC;MACtBO,OAAO,CAACC,GAAG,CAACJ,cAAc,EAAEC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC;IAChD,CAAC,MAAM;MACLC,OAAO,CAACC,GAAG,CAACJ,cAAc,EAAEC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC;MAC9CG,YAAY,EAAE;IAChB;IACAP,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC,EAAE,CAACH,aAAa,CAAC,CAAC;EAEnB,SAASW,WAAW,GAAG;IACrBV,gBAAgB,CAAC,IAAI,CAAC;EACxB;EAEA,SAASS,YAAY,GAAG;IACtBZ,YAAY,CAACc,KAAK,EAAE;IACpBX,gBAAgB,CAAC,KAAK,CAAC;EACzB;EACA,IAAIC,OAAO,EAAE;IACX,oBAAO;MAAA,UAAI;IAAU;MAAA;MAAA;MAAA;IAAA,QAAK;EAC5B,CAAC,MAAM;IACL,oBACE,QAAC,OAAO,CAAC,QAAQ;MACf,KAAK,EAAE;QAAEF,aAAa;QAAEW,WAAW;QAAED,YAAY;QAAEb,MAAM;QAAEJ;MAAO,CAAE;MAAA,UAEnED;IAAQ;MAAA;MAAA;MAAA;IAAA,QACQ;EAEvB;AACF;AAAC,GArCQD,YAAY;AAAA,KAAZA,YAAY;AAuCrB,SAASD,OAAO,EAAEC,YAAY;AAAG;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}